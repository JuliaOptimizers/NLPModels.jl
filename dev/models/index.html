<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Models · NLPModels.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/style.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="NLPModels.jl logo"/></a><h1>NLPModels.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>Models</a><ul class="internal"><li><a class="toctext" href="#ADNLPModel-1">ADNLPModel</a></li><li><a class="toctext" href="#Derived-Models-1">Derived Models</a></li><li><a class="toctext" href="#ADNLSModel-1">ADNLSModel</a></li><li><a class="toctext" href="#FeasibilityResidual-1">FeasibilityResidual</a></li><li><a class="toctext" href="#LLSModel-1">LLSModel</a></li><li><a class="toctext" href="#SlackNLSModel-1">SlackNLSModel</a></li><li><a class="toctext" href="#FeasibilityFormNLS-1">FeasibilityFormNLS</a></li></ul></li><li><a class="toctext" href="../tools/">Tools</a></li><li><a class="toctext" href="../tutorial/">Tutorial</a></li><li><a class="toctext" href="../api/">API</a></li><li><a class="toctext" href="../reference/">Reference</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Models</a></li></ul><a class="edit-page" href="https://github.com/JuliaSmoothOptimizers/NLPModels.jl/blob/master/docs/src/models.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Models</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Models-1" href="#Models-1">Models</a></h1><p>The following general models are implemented in this package:</p><ul><li><a href="#ADNLPModel-1">ADNLPModel</a></li><li><a href="#Derived-Models-1">Derived Models</a><ul><li><a href="#SlackModel-1">SlackModel</a></li><li><a href="#LBFGSModel-1">LBFGSModel</a></li><li><a href="#LSR1Model-1">LSR1Model</a></li></ul></li></ul><p>In addition, the following nonlinear least squares models are implemented in this package:</p><ul><li><a href="#ADNLSModel-1">ADNLSModel</a></li><li><a href="#FeasibilityResidual-1">FeasibilityResidual</a></li><li><a href="#LLSModel-1">LLSModel</a></li><li><a href="#SlackNLSModel-1">SlackNLSModel</a></li><li><a href="#FeasibilityFormNLS-1">FeasibilityFormNLS</a></li></ul><p>There are other external models implemented. In particular,</p><ul><li><a href="https://github.com/JuliaSmoothOptimizers/AmplNLReader.jl">AmplModel</a></li><li><a href="https://github.com/JuliaSmoothOptimizers/CUTEst.jl">CUTEstModel</a></li><li><a href="https://github.com/JuliaSmoothOptimizers/NLPModelsJuMP.jl">MathProgNLPModel and MathProgNLSModel</a> using <code>JuMP/MPB</code>.</li></ul><p>There are currently two models implemented in this package, besides the external ones.</p><h2><a class="nav-anchor" id="ADNLPModel-1" href="#ADNLPModel-1">ADNLPModel</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.ADNLPModel" href="#NLPModels.ADNLPModel"><code>NLPModels.ADNLPModel</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>ADNLPModel is an AbstractNLPModel using ForwardDiff to compute the derivatives. In this interface, the objective function <span>$f$</span> and an initial estimate are required. If there are constraints, the function <span>$c:ℝⁿ → ℝᵐ$</span>  and the vectors <span>$c_L$</span> and <span>$c_U$</span> also need to be passed. Bounds on the variables and an inital estimate to the Lagrangian multipliers can also be provided.</p><pre><code class="language-none">ADNLPModel(f, x0; lvar = [-∞,…,-∞], uvar = [∞,…,∞], y0 = zeros,
  c = NotImplemented, lcon = [-∞,…,-∞], ucon = [∞,…,∞], name = &quot;Generic&quot;)</code></pre><ul><li><code>f</code> - The objective function <span>$f$</span>. Should be callable;</li><li><code>x0 :: AbstractVector</code> - The initial point of the problem;</li><li><code>lvar :: AbstractVector</code> - <span>$ℓ$</span>, the lower bound of the variables;</li><li><code>uvar :: AbstractVector</code> - <span>$u$</span>, the upper bound of the variables;</li><li><code>c</code> - The constraints function <span>$c$</span>. Should be callable;</li><li><code>y0 :: AbstractVector</code> - The initial value of the Lagrangian estimates;</li><li><code>lcon :: AbstractVector</code> - <span>$c_L$</span>, the lower bounds of the constraints function;</li><li><code>ucon :: AbstractVector</code> - <span>$c_U$</span>, the upper bounds of the constraints function;</li><li><code>name :: String</code> - A name for the model.</li></ul><p>The functions follow the same restrictions of ForwardDiff functions, summarised here:</p><ul><li>The function can only be composed of generic Julia functions;</li><li>The function must accept only one argument;</li><li>The function&#39;s argument must accept a subtype of AbstractVector;</li><li>The function should be type-stable.</li></ul><p>For contrained problems, the function <span>$c$</span> is required, and it must return an array even when m = 1, and <span>$c_L$</span> and <span>$c_U$</span> should be passed, otherwise the problem is ill-formed. For equality constraints, the corresponding index of <span>$c_L$</span> and <span>$c_U$</span> should be the same.</p></div></div></section><h3><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h3><div><pre><code class="language-julia">using NLPModels
f(x) = sum(x.^4)
x = [1.0; 0.5; 0.25; 0.125]
nlp = ADNLPModel(f, x)
grad(nlp, x)</code></pre><pre><code class="language-none">4-element Array{Float64,1}:
 4.0
 0.5
 0.0625
 0.0078125</code></pre></div><h2><a class="nav-anchor" id="Derived-Models-1" href="#Derived-Models-1">Derived Models</a></h2><p>The following models are created from any given model, making some modification to that model.</p><h3><a class="nav-anchor" id="SlackModel-1" href="#SlackModel-1">SlackModel</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.SlackModel" href="#NLPModels.SlackModel"><code>NLPModels.SlackModel</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>A model whose only inequality constraints are bounds.</p><p>Given a model, this type represents a second model in which slack variables are introduced so as to convert linear and nonlinear inequality constraints to equality constraints and bounds. More precisely, if the original model has the form</p><div>\[\begin{align*}
       \min_x \quad &amp; f(x)\\
\mathrm{s.t.} \quad &amp; c_L ≤ c(x) ≤ c_U,\\
                    &amp;  ℓ  ≤  x   ≤  u,
\end{align*}\]</div><p>the new model appears to the user as</p><div>\[\begin{align*}
       \min_X \quad &amp; f(X)\\
\mathrm{s.t.} \quad &amp; g(X) = 0,\\
                    &amp; L ≤ X ≤ U.
\end{align*}\]</div><p>The unknowns <span>$X = (x, s)$</span> contain the original variables and slack variables <span>$s$</span>. The latter are such that the new model has the general form</p><div>\[\begin{align*}
       \min_x \quad &amp; f(x)\\
\mathrm{s.t.} \quad &amp; c(x) - s = 0,\\
                    &amp; c_L ≤ s ≤ c_U,\\
                    &amp;  ℓ  ≤ x ≤ u.
\end{align*}\]</div><p>although no slack variables are introduced for equality constraints.</p><p>The slack variables are implicitly ordered as <code>[s(low), s(upp), s(rng)]</code>, where <code>low</code>, <code>upp</code> and <code>rng</code> represent the indices of the constraints of the form <span>$c_L ≤ c(x) &lt; ∞$</span>, <span>$-∞ &lt; c(x) ≤ c_U$</span> and <span>$c_L ≤ c(x) ≤ c_U$</span>, respectively.</p></div></div></section><h3><a class="nav-anchor" id="Example-2" href="#Example-2">Example</a></h3><div><pre><code class="language-julia">using NLPModels
f(x) = x[1]^2 + 4x[2]^2
c(x) = [x[1]*x[2] - 1]
x = [2.0; 2.0]
nlp = ADNLPModel(f, x, c=c, lcon=[0.0])
nlp_slack = SlackModel(nlp)
nlp_slack.meta.lvar</code></pre><pre><code class="language-none">3-element Array{Float64,1}:
 -Inf
 -Inf
    0.0</code></pre></div><h3><a class="nav-anchor" id="LBFGSModel-1" href="#LBFGSModel-1">LBFGSModel</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.LBFGSModel" href="#NLPModels.LBFGSModel"><code>NLPModels.LBFGSModel</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Construct a <code>LBFGSModel</code> from another type of model.</p></div></div></section><h3><a class="nav-anchor" id="LSR1Model-1" href="#LSR1Model-1">LSR1Model</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.LSR1Model" href="#NLPModels.LSR1Model"><code>NLPModels.LSR1Model</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Construct a <code>LSR1Model</code> from another type of nlp.</p></div></div></section><h2><a class="nav-anchor" id="ADNLSModel-1" href="#ADNLSModel-1">ADNLSModel</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.ADNLSModel" href="#NLPModels.ADNLSModel"><code>NLPModels.ADNLSModel</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>ADNLSModel is an Nonlinear Least Squares model using ForwardDiff to compute the derivatives.</p><pre><code class="language-none">ADNLSModel(F, x0, m; lvar = [-∞,…,-∞], uvar = [∞,…,∞], y0 = zeros,
  c = NotImplemented, lcon = [-∞,…,-∞], ucon = [∞,…,∞], name = &quot;Generic&quot;)</code></pre><ul><li><code>F</code> - The residual function <span>$F$</span>. Should be callable;</li><li><code>x0 :: AbstractVector</code> - The initial point of the problem;</li><li><code>m :: Int</code> - The dimension of <span>$F(x)$</span>, i.e., the number of</li></ul><p>equations in the nonlinear system.</p><p>The other parameters are as in <code>ADNLPModel</code>.</p></div></div></section><div><pre><code class="language-julia">using NLPModels
F(x) = [x[1] - 1; 10*(x[2] - x[1]^2)]
nlp = ADNLSModel(F, [-1.2; 1.0], 2)
residual(nlp, nlp.meta.x0)</code></pre><pre><code class="language-none">2-element Array{Float64,1}:
 -2.2
 -4.3999999999999995</code></pre></div><h2><a class="nav-anchor" id="FeasibilityResidual-1" href="#FeasibilityResidual-1">FeasibilityResidual</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.FeasibilityResidual" href="#NLPModels.FeasibilityResidual"><code>NLPModels.FeasibilityResidual</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>A feasibility residual model is created from a NLPModel of the form</p><pre><code class="language-none">min f(x)
s.t cℓ ≤ c(x) ≤ cu
    bℓ ≤   x  ≤ bu</code></pre><p>by creating slack variables s and defining F(x,s) = c(x) - s. The resulting NLS problem is</p><pre><code class="language-none">min ¹/₂‖c(x) - s‖²
    bℓ ≤ x ≤ bu
    cℓ ≤ s ≤ bu</code></pre><p>This is done using SlackModel first, and then defining the NLS. Notice that if bℓᵢ = buᵢ, no slack variable is created.</p></div></div></section><h2><a class="nav-anchor" id="LLSModel-1" href="#LLSModel-1">LLSModel</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.LLSModel" href="#NLPModels.LLSModel"><code>NLPModels.LLSModel</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">nls = LLSModel(A, b; lvar, uvar, C, lcon, ucon)</code></pre><p>Creates a Linear Least Squares model ½‖Ax - b‖² with optional bounds <code>lvar ≦ x ≦ y</code> and optional linear constraints <code>lcon ≦ Cx ≦ ucon</code>.</p></div></div></section><h2><a class="nav-anchor" id="SlackNLSModel-1" href="#SlackNLSModel-1">SlackNLSModel</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.SlackNLSModel" href="#NLPModels.SlackNLSModel"><code>NLPModels.SlackNLSModel</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Like <code>SlackModel</code>, this model converts inequalities into equalities and bounds.</p></div></div></section><h2><a class="nav-anchor" id="FeasibilityFormNLS-1" href="#FeasibilityFormNLS-1">FeasibilityFormNLS</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="NLPModels.FeasibilityFormNLS" href="#NLPModels.FeasibilityFormNLS"><code>NLPModels.FeasibilityFormNLS</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Converts a nonlinear least-squares problem with residual <code>F(x)</code> to a nonlinear optimization problem with constraints <code>F(x) = r</code> and objective <code>¹/₂‖r‖²</code>. In other words, converts</p><pre><code class="language-none">min ¹/₂‖F(x)‖²
s.t  cₗ ≤ c(x) ≤ cᵤ
      ℓ ≤   x  ≤ u</code></pre><p>to</p><pre><code class="language-none">min ¹/₂‖r‖²
s.t   F(x) - r = 0
     cₗ ≤ c(x) ≤ cᵤ
      ℓ ≤   x  ≤ u</code></pre><p>If you rather have the first problem, the <code>nls</code> model already works as an NLPModel of that format.</p></div></div></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../tools/"><span class="direction">Next</span><span class="title">Tools</span></a></footer></article></body></html>
